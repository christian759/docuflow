{{ define "content" }}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h2>{{ if .ID }}Edit Document{{ else }}New Document{{ end }}</h2>
        <span id="save-status"></span>
    </div>
    <form action="{{ if .ID }}/documents/edit?id={{ .ID }}{{ else }}/documents/new{{ end }}" method="POST">
        <label>Title</label>
        <input type="text" name="title" value="{{ .Title }}" required>

        <label>Content (Markdown)</label>
        <textarea name="content" id="content-editor"
            style="width: 100%; height: 400px; padding: 0.5rem; border: 1px solid #e2e8f0; border-radius: 0.375rem; font-family: monospace;"
            {{ if .ID }} hx-post="/documents/autosave" hx-trigger="keyup changed delay:2s" hx-vals='{"id": "{{ .ID }}"}'
            hx-target="#save-status" {{ end }} required>{{ .Content }}</textarea>

        <button type="submit" class="btn" style="margin-top: 1rem;">Save Document</button>
    </form>
</div>
{{ end }}