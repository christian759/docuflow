<div id="comments-section">
    <h3>Comments</h3>

    <form hx-post="/comments/add" hx-target="#comments-section" hx-swap="outerHTML" style="margin-bottom: 1.5rem;">
        <input type="hidden" name="document_id" value="{{ .DocumentID }}">
        <textarea name="content" placeholder="Add a comment..."
            style="width: 100%; height: 80px; padding: 0.5rem; border: 1px solid #e2e8f0; border-radius: 0.375rem; margin-bottom: 0.5rem;"
            required></textarea>
        <button type="submit" class="btn">Post Comment</button>
    </form>

    {{ if .Comments }}
    <ul style="list-style: none; padding: 0;">
        {{ range .Comments }}
        <li
            style="border-left: 3px solid #2563eb; padding: 0.75rem 1rem; margin-bottom: 1rem; background: #f8fafc; border-radius: 0 0.375rem 0.375rem 0;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <strong style="color: #2563eb;">{{ .Username }}</strong>
                    <span style="color: #64748b; font-size: 0.875rem;">{{ .CreatedAt.Format "Jan 02, 15:04" }}</span>
                </div>
                <form hx-post="/comments/delete" hx-target="#comments-section" hx-swap="outerHTML" style="margin: 0;">
                    <input type="hidden" name="comment_id" value="{{ .ID }}">
                    <input type="hidden" name="document_id" value="{{ $.DocumentID }}">
                    <button type="submit"
                        style="background: none; border: none; color: #ef4444; cursor: pointer; font-size: 0.875rem;">Delete</button>
                </form>
            </div>
            <p style="margin: 0.5rem 0 0 0;">{{ .Content }}</p>
        </li>
        {{ end }}
    </ul>
    {{ else }}
    <p style="color: #64748b;">No comments yet. Be the first to comment!</p>
    {{ end }}
</div>