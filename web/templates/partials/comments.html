<div class="comments-header">
    <h3 class="comments-title">Discussion</h3>
    <span class="comments-count">{{ len .Comments }} comments</span>
</div>

<form class="comment-form" hx-post="/comments/add" hx-target="closest .comments-section" hx-swap="innerHTML">
    <input type="hidden" name="document_id" value="{{ .DocumentID }}">
    <textarea name="content" class="comment-input" placeholder="Add your thoughts or questions..." required></textarea>
    <button type="submit" class="btn btn-primary btn-sm">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="22" y1="2" x2="11" y2="13" />
            <polygon points="22 2 15 22 11 13 2 9 22 2" />
        </svg>
        Post Comment
    </button>
</form>

{{ if .Comments }}
<ul class="comment-list">
    {{ range .Comments }}
    <li class="comment-item">
        <div class="comment-header">
            <div class="flex items-center gap-2">
                <span class="revision-avatar" style="width: 28px; height: 28px; font-size: 0.75rem;">{{ slice .Username
                    0 1 }}</span>
                <span class="comment-author">{{ .Username }}</span>
            </div>
            <div class="flex items-center gap-3">
                <span class="comment-time">{{ .CreatedAt.Format "Jan 02, 15:04" }}</span>
                <form hx-post="/comments/delete" hx-target="closest .comments-section" hx-swap="innerHTML"
                    style="margin: 0;">
                    <input type="hidden" name="comment_id" value="{{ .ID }}">
                    <input type="hidden" name="document_id" value="{{ $.DocumentID }}">
                    <button type="submit" class="btn btn-ghost btn-sm"
                        style="color: var(--error-500); padding: var(--space-1) var(--space-2);">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="3 6 5 6 21 6" />
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                        </svg>
                    </button>
                </form>
            </div>
        </div>
        <p class="comment-body">{{ .Content }}</p>
    </li>
    {{ end }}
</ul>
{{ else }}
<p class="text-muted text-sm" style="text-align: center; padding: var(--space-6) 0;">No comments yet. Start the
    discussion!</p>
{{ end }}