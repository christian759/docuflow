{{ define "content" }}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">{{ if .ID }}Edit Document{{ else }}New Document{{ end }}</h2>
        <span id="save-status" class="save-indicator"></span>
    </div>

    <div class="card-body">
        <form action="{{ if .ID }}/documents/edit?id={{ .ID }}{{ else }}/documents/new{{ end }}" method="POST">
            <div class="form-group">
                <label class="form-label">Title</label>
                <input type="text" name="title" value="{{ .Title }}" class="form-input"
                    placeholder="Enter document title..." required>
            </div>

            <div class="form-group">
                <label class="form-label">Content</label>
                <p class="form-hint" style="margin-top: 0; margin-bottom: var(--space-2);">Write your content using
                    Markdown syntax</p>
                <textarea name="content" id="content-editor" class="form-textarea" placeholder="# Getting Started

Write your documentation here using **Markdown** syntax.

- Use headings to structure content
- Add code blocks with syntax highlighting
- Create lists, tables, and more" {{ if .ID }} hx-post="/documents/autosave" hx-trigger="keyup changed delay:2s"
                    hx-vals='{"id": "{{ .ID }}"}' hx-target="#save-status" {{ end }} required>{{ .Content }}</textarea>
            </div>

            <div class="flex gap-3">
                <button type="submit" class="btn btn-primary">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
                        <polyline points="17 21 17 13 7 13 7 21" />
                        <polyline points="7 3 7 8 15 8" />
                    </svg>
                    Save Document
                </button>
                {{ if .ID }}
                <a href="/documents/view?id={{ .ID }}" class="btn btn-secondary">Cancel</a>
                {{ else }}
                <a href="/" class="btn btn-secondary">Cancel</a>
                {{ end }}
            </div>
        </form>
    </div>
</div>
{{ end }}